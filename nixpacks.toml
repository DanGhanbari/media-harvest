# Railway nixpacks configuration for FFmpeg and yt-dlp support
[phases.setup]
nixPkgs = ['nodejs_18', 'ffmpeg', 'curl', 'python3', 'python3Packages.pip', 'deno', 'unzip']

[phases.install]
cmds = ['mkdir -p /app/.deno', 'curl -fsSL https://deno.land/install.sh | DENO_INSTALL=/app/.deno sh', 'pip3 install --break-system-packages yt-dlp']

[phases.build]
cmds = ['npm ci', 'npm run build']

[phases.start]
cmd = 'node server.js'

# Force rebuild timestamp: 2025-01-16-12:00:00